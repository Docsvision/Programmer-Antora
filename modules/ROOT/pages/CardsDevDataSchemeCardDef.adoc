= Описание карточки. Общая информация карточки

image::dev_card_8.png[Общая информация карточки]

Общее описание карточки предполагает заполнение следующих полей:

* *Псевдоним* -- псевдоним карточки, с помощью которого к ней можно обращаться в коде. Псевдоним должен быть уникальным в рамках библиотеки;
* *Редакция* -- номер версии карточки;
* *Названия* -- локализованные названия карточки, отображаемые пользователю;
* *Идентификатор* -- уникальный идентификатор данного типа карточек. Этот идентификатор генерируется автоматически при создании новой карточки. Идентификатор должен быть уникален в рамках всей базы данных карточек;
* *Идентификатор библиотеки* -- идентификатор библиотеки, которой принадлежит карточка. Заполняется автоматически;
* *Идентификатор ProgID* -- программный идентификатор COM-компонента, реализующего функциональность карточки. Для .Net карточек не требуется;
* *Строка активизации* -- строка активизации компонента карточки. Может содержать программный идентификатор (ProgID), идентификатор класса (CLSID) и данные о лицензировании. Для .Net карточек не требуется;
* *Имя типа*– полное имя класса компонента карточки. Для .Net карточек следует указывать данный параметр вместо ProgID и строки активации;
* *Путь к файлу с иконкой* -- иконка данного типа карточек, отображаемая для пользователя. Рекомендуется использовать относительные пути при указании иконки;
* *Режим чтения данных* -- позволяет выбрать механизм чтения данных карточки. Возможны следующие варианты режима чтения:
** *FETCH_CARD* (карточка целиком) -- при обращении к карточке все её данные будут переданы клиенту;
** *FETCH_SECTION* (секция) -- при обращении к данным карточки будет прочитана целиком соответствующая секция;
** *FETCH_SUBSECTION* (подсекция) -- чтение только данных подсекций;
** *FETCH_LEVEL* (уровень) -- чтение только данных одного уровня дерева (для иерархических секций);
** *FETCH_ROW* -- чтение только данных одной строки;
* Дополнительные атрибуты, определяющие особенности поведения карточки в системе:
** *Do not mark card as unread* -- по умолчанию при создании экземпляра карточки ярлык на неё помечается как "непрочитанный" (выделяется жирным шрифтом в окне Windows-клиента). Данный атрибут позволяет отключить эту возможность;
** *Card can be marked as template by user* -- данный атрибут позволяет использовать механизм шаблонов для данного типа карточек;
** *Instances can be copied* -- разрешает или запрещает копирование данных карточки;
** *Card needs custom XML export procedure* -- карточки этого типа используют нестандартную процедуру выгрузки в XML (стандартные пункты меню будут недоступны);
** *Dictionary ( only one instance allowed)* -- разрешается существование в системе только одного экземпляра карточки. Используется для справочников;
** *Can work as folder card* -- для карточек, реализующих функциональность папок (такую функциональность реализует системная карточка папок, которую разработчик может подменить собственной);
** *Items can be selected from this card* -- карточку можно использовать для выбора её элементов (запускать в режиме выбора);
** *Do not create hard shortcuts* -- атрибут регулирует механизм создания ярлыков для экземпляров карточек. По умолчанию при создании экземпляра карточки для неё создается "сильный" ярлык, при удалении которого удаляется и сама карточка. Данный атрибут позволяет отключить эту возможность;
** *Do not lock the card when opened* -- разрешает или запрещает автоматическую блокировку данных карточки при её открытии из Windows-клиента. Если блокировка установлена, то одновременная работа пользователей с одним экземпляром карточки запрещается на системном уровне. Если блокировка отключена, то разработчик карточки должен сам контролировать ситуации одновременного доступа к данным;
** *Non-archival* -- разрешает или запрещает перемещание данных карточки в архивные таблицы или архивную базу данных (при использовании дополнительного модуля архивации);
** *System (user cannot create instance)* -- пользователь не может создать экземпляр карточки. Используется для карточек, не имеющих пользовательского интерфейса, и утилит. Экземпляры таких карточек создаются только программно;
** *User cannot delete card instances* -- карточки данного типа не могут удаляться пользователями (соответствующие пункты меню и панели инструментов будут недоступны);
** *Card cannot be replicated* -- данная опция регулирует возможность репликации всех экземпляров данной карточки;
** *Non-searchable* -- карточка не участвует в поиске и не индексируется;
** *Hidden* -- экземпляры данного типа карточек не отображаются пользователю. Обычно используется совместно с атрибутом "Системная";
** *Replicate only card templates* -- в процессе репликации будут участвовать только те карточки данного типа, которые помечены в качестве шаблонов;
** *Allow to open as linked card* -- атрибут для связанных карточек. Разрешает или запрещает открытие пользовательского интерфейса карточки из других карточек;
** *Card is securable* -- регулирует механизм выдачи прав на данные карточки. При наличии данного признака, права могут быть назначены на все структурные элементы карточки (секции, строки секций). При отсутствии данного признака используется так называемый упрощённый режим -- права выдаются только на карточку целиком.
+
[IMPORTANT]
====
Для повышения производительности крайне НЕ рекомендуется устанавливать этот признак для карточек без особой необходимости!
====
** *Provides UI Extension* -- атрибут для карточек, которые интегрируются с интерфейсом Windows-клиента для реализации прикладных функций;
** *High changes rate* -- атрибут следует устанавливать у тех карточек, изменение данных в которых происходит с экстремально большой частотой (например, он установлен у системной карточки папок). При установленном флаге timestamp данной карточки не обновляется при изменении, а вычисляется по набору timestamp’ов секций данной карточки.
** *Use server extension when checking access to the card* -- атрибут по умолчанию включен для карточек документов и заданий. Если флаг снят, ролевая модель при проверке прав на карточки не используется.
** *Client-side data caching on disk is restricted* -- атрибут позволяет запретить кэширование клиентских данных на диск. По умолчанию эта функция отключена.
* *Default security descriptor* -- дескриптор безопасности, который определяет набор, назначаемых прав по умолчанию при создании экземпляров карточки.
+
[IMPORTANT]
====
В этом дескрипторе можно использовать только константные идентификаторы объектов (well-known security identifiers), т.к. создаваться экземпляры карточки будут в другом домене чем тот, где она разрабатывается.
====
