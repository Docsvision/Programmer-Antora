= Раздел 'Sections'. Описание секции

Заполнение данных о секциях предполагает создание структуры (иерархии) секций данных карточки, указание их свойств и полей. Для добавления новой секции нужно воспользоваться командой [.ph .uicontrol]*New section* в секции [.keyword .wintitle]*Sections*. После этого необходимо указать свойства новой секции и список входящих в нее полей

[NOTE]
====
[.note__title]#Внимание:# Для корректной работы карточки требуется наличие у неё, как минимум, одной секции.
====

image::dev_card_9.png[[.fig--title-label]##Рис. 1. ##Описание секции карточки]

Описание секции содержит следующие свойства:

* [.ph .uicontrol]*Псевдоним* – псевдоним секции, с помощью которого к ней можно обращаться в коде.
+
[NOTE]
====
[.note__title]#Важное замечание:# Псевдоним секции должен отличаться от псевдонима карточки. Псевдоним должен быть уникальным в рамках карточки.
====
* [.ph .uicontrol]*Единственное число* – строка, указывающая наименование соответствующего класса при использовании утилит авто-генерации кода по описанию карточки;
* [.ph .uicontrol]*Названия* – локализованные названия секции, отображаемые для пользователя;
* [.ph .uicontrol]*Идентификатор* – уникальный идентификатор данной секции. Этот идентификатор генерируется автоматически при добавлении новой секции и может быть сгенерирован заново при нажатии кнопки [.ph .uicontrol]*New*;
* [.ph .uicontrol]*Тип* – тип секции:
** *struct* - плоская;
** *table* - коллекционная;
** *tree* - иерархическая.
* [.ph .uicontrol]*Формат полей отображения* – формат описания (дайджеста) строки секции. Дайджесты строк - это текстовые комментарии, уникальным образом характеризующие конкретную строку внутри секции. В основном, они используются в элементах управления, предназначенных для выбора строк секции;
+
[NOTE]
====
[.note__title]#Прим.:# В текущей версии формат описания строки не применяется и зарезервирован для будущего использования.
====
* [.ph .uicontrol]*Поля для отображения строк* – поля, из которых составляются описания (дайджесты) строк секции. Значения этих полей приводятся к строчному выражению, объединяются в порядке их описания и отделяются друг от друга пробелом;
+
[NOTE]
====
[.note__title]#Прим.:# Например, секция содержит данные о сотрудниках организации и имеет несколько полей, среди которых есть _Name_ (Имя), _SurName_ (фамилия) и _MiddleName_ (Отчество). В этом случае, если выбрать эти три поля в качестве полей для отображения строки, то во всех элементах управления выбранная строка данной секции будет отображаться как _Фамилия Имя Отчество_.
====
* [.ph .uicontrol]*Содержит свойства карточки* – атрибут для секций свойств. Это специальный вид секций, содержащих ряд предопределённых полей, которые могут выступать в качестве пользовательских атрибутов карточки (свойств). Платформа позволяет обрабатывать свойства карточки специальным образом – например, выводить их в представления или синхронизировать их значения со свойствами файлов Office. При отметке какой-либо секции как _содержащей свойства_, требуется дополнительно указать ключевые поля этой секции:
** *Имя* – поле, содержащее название свойства (строка);
** *Значение* – поле, содержащее значение свойства (чаще всего – variant);
** *Отображаемое* – поле, содержащее отображаемое значение свойства (строка);
** *Тип* – поле, определяющее тип свойства (перечисляемое);
* [.ph .uicontrol]*Поля для сортировки* – описание полей секции, по которым производится сортировка строк при обращении к данным секции. Можно указать прямой или обратный порядок сортировки для конкретных полей. Число полей для сортировки не ограничено. Сортировка производится в порядке следования этих полей в описании;
* [.ph .uicontrol]*Индексы и ограничения* – ограничения на поля секции. Каждое ограничение устанавливает одно требование к одному полю или набору полей секции. Можно указать следующие ограничения:
** *Unique globally* – значение поля (или набора полей) уникально в рамках сервера Docsvision;
** *Unique within card* – значение поля (или набора полей) уникально в рамках экземпляра карточки;
** *Unique within section* – значение поля (или набора полей) уникально в рамках секции;
** *Unique within tree* – значение поля (или набора полей) уникально в рамках всех уровней иерархической секции;
** *Clastered index* – по полю строится кластерный индекс;
** *Non- clastered index* – по полю строится некластерный индекс;
** *Unique clastered index* – по полю строится уникальный кластерный индекс;
** *Unique non - clastered index* – по полю строится уникальный некластерный индекс;
+
[NOTE]
====
[.note__title]#Важное замечание:# Необходимо внимательно отнестись к созданию индексов, так как их не оптимальное создание (или попросту отсутствие) способно значительно понизить производительность всей системы.
====
* Дополнительные настройки секции:
** [.ph .uicontrol]*Допускает одновременный доступ* – допускается одновременная работа нескольких пользователей с данными секции (чаще всего этот признак устанавливается для справочников и требует отказа от блокировки карточки).
** [.ph .uicontrol]*Исключить из поиска* – поля секции не будут отображаться в диалоге поиска.
** [.ph .uicontrol]*Из раздела могут быть выбраны строки* – секцию можно использовать для выбора строк (чаще всего этот признак устанавливается для секций справочников).
** [.ph .uicontrol]*Запись событий в журнал необязательна* – сообщение об изменении строки секции не будет записываться в системный журнал;
+
[NOTE]
====
[.note__title]#Внимание:# Для повышения производительности крайне рекомендуется устанавливать этот режим для секций, с которыми производится интенсивная работа (например, для секций с данными журналирования).
====
** [.ph .uicontrol]*Не копировать данные раздела* – при копировании карточки строки данной секции не будут копироваться.
** [.ph .uicontrol]*Секция защищенная*– признак наличия собственных дескрипторов у строк секции (используется в случае полной безопасности на карточке в целом).
** [.ph .uicontrol]*Элементы неудаляемые*– признак, показывающий что строки из данной секции не могут быть удалены.
** [.ph .uicontrol]*Не редактировать строки с иного сервера* - устанавливает запрет на изменение строк секции, если строки созданы на другом сервере. Например, подразделение, созданное на одном сервере, и реплицированное на другие сервера, будет доступно «только для чтения» на других серверах. Зарезервирован для модуля "Межфилиального обмена".
** [.ph .uicontrol]*Не изменять дочерние строки с иного сервера* - устанавливает запрет на изменение строк секции, если секция создана на другом сервере. Например, сотрудники подразделения, созданного на одном другом сервере, будут доступны только для чтения на других серверах. Зарезервирован для модуля "Межфилиального обмена".

== См. далее

* xref:CardsDevDataSchemeSectionsFields.adoc[Раздел 'Sections'. Добавление полей и дочерних секций]
