= Запуск экземпляра бизнес-процесса

Далее приведен пример кода скрипта ("Конструктор скриптов"), определенного типа карточки, в котором из существующего шаблона создается, а затем запускает экземпляр бизнес-процесса. Шаблон бизнес-процесса имеет одну переменную (типа "Строка"), в которую передается отображаемое имя сотрудника, выполнившего запуск скрипта. Предполагается, что скрипт запускается из карточки типа "Документ".

[source,csharp]
----
// Создание экземпляра БП на основе существующего шаблона с его последующим запуском
private void Button_ItemClick(System.Object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
 // Инициализация объекта для работы с библиотекой карточкой СУБП
 // userSession - пользовательская сессия
 Library library = new Library(base.Session);
 
 // Получение существующего шаблона бизнес-процесса
 // 00000000-0000-0000-0000-000000000000 - идентификатор шаблона бизнес-процесса
 Process template = library.GetProcess(new Guid("00000000-0000-0000-0000-000000000000"));
 
 // Создание нового экземпляра бизнес-процесса
 Process process = library.CreateProcess(template);

 // Сохранение инициирующего документа
 process.InitialDocument = base.CardData.Id.ToString("B");

 // Присвоение значения переменной бизнес-процесса
 // 00000000-0000-0000-0000-000000000001 - идентификатор переменной бизнес-процесса, может быть получен из шаблона БП
 // при помощи утилиты Docsvision Explorer (поле "ID" в секции "Переменные" карточки БП, используемой в качестве шаблона)
 process.Variables[new Guid("00000000-0000-0000-0000-000000000001")].Value = (base.BaseObject as Document).MainInfo.Author.DisplayName;
 
 // Запуск экземпляра бизнес-процесса
 // AccountName - учетная запись пользователя, от имени которого производиться запуск БП 
  // Library - ссылка на справочники Workflow (Assemblies, Functions, Gates)
 // executionMode - режим исполнения процесса
 // suppressExecuteModeCompution - флаг, позволяющий отложить вычисление режима исполнения процесса
 process.Start(base.Session.Properties["AccountName"].Value.ToString(), library.Dictionary,  ExecutionModeEnum.Automatic, true);
}
----

К скрипту требуется подключить дополнительные сборки:

* `DocsVision.Workflow.Objects.dll`
* `DocsVision.Workflow.Interfaces.dll`

Также необходимо добавить ссылку на пространство имен [.keyword .apiname]#DocsVision.Workflow.Objects#:

[source,csharp]
----
using DocsVision.Workflow.Objects;
----
