= Использование сервисов состояний и прав доступа для проверки допустимости выполнения операции над карточкой

Пример проверки допустимости выполнения встроенной операции TakeToWorkOperation для карточки задания:

[source,csharp]
----
// Получаем контекст
ObjectContext context = GetContext();

// Получаем идентификатор задания
Guid taskId = GetTaskId();

// Получаем задание
Task task = context.GetObject<Task>(taskId);

// Получаем сервис состояний
ObjectModel.Services.IStateService stateService = context.GetService<ObjectModel.Services.IStateService>();

// Получаем сервис проверки доступа
ObjectModel.Services.IAccessCheckingService accessService = context.GetService<ObjectModel.Services.IAccessCheckingService>();

// Используем сервис для проверки разрешенности операции по состояниям и по правам доступа
bool operationAllowed = stateService.IsOperationAllowed(Task.TakeToWorkOperation, task) && accessService.IsOperationAllowed(task, Task.TakeToWorkOperation);
----
