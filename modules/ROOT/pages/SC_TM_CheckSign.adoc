= Проверка действительности ЭЦП в документе

Ниже приведен пример проверки действительности подписи, установленной на поля документа. В этом случае проверка подписи на файлах не проводится. Для проверки вызывается метод CheckActualSignature сервиса документов IDocumentService.

[source,pre,codeblock,language-csharp]
----
IDocumentService documentService = objectContext.GetService<IDocumentService>();
IUserProfileCardService iUserProfileCardService = objectContext.GetService<IUserProfileCardService>();

//получение документа с идентификатором 00000000-0000-0000-0000-000000000000
Document document = objectContext.GetObject<Document>(new Guid("00000000-0000-0000-0000-000000000000"));

//получение списка подписываемых полей в данном виде документа
var fields = documentService.GetKindSettings(document.SystemInfo.CardKind).DocumentSignature.Fields;
            
foreach (var item in document.MainInfo.SignatureList.Signatures)
{
 //получение сертификата из профиля пользователя подписавшего документ (item.Signer)
 X509Certificate2 certificate = iUserProfileCardService.GetCertificate(item.Signer.AccountName);
 
 //проверка подписи, при true - подпись валидатна
 bool isCheckOk = documentService.CheckActualSignature(document, fields, item);
 Console.WriteLine("{0} - {1}",item.Signer.DisplayName, isCheckOk);
}
----

*На уровень выше:* xref:../pages/samples_objectmodel_container.adoc[Использование объектной модели уровня бизнес-логики]
