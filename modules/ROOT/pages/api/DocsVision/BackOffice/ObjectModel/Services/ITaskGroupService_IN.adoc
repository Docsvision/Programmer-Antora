= ITaskGroupService - интерфейс

Сервис для работы со группами заданий.

* [.keyword]*Пространство имен:* xref:Services_NS.adoc[DocsVision.BackOffice.ObjectModel.Services]
* [.keyword]*Сборка:* [.ph .filepath]`DocsVision.BackOffice.ObjectModel.dll`

== Синтаксис

[source,pre,codeblock,language-csharp]
----
public interface ITaskGroupService
----

== Методы

[cols=",",options="header",]
|===
|Имя |Описание
|xref:ITaskGroupService.AddDelegatePreset_MT.adoc[AddDelegatePreset(TaskGroupPresets, StaffEmployee)] |Добавляет исполнителя в индивидуальные настройки исполнителя группы заданий.
|xref:ITaskGroupService.AddDelegatePreset_1_MT.adoc[AddDelegatePreset(TaskGroupPresets, StaffGroup)] |Добавляет группу сотрудников в число исполнителей в индивидуальные настройки исполнителя группы заданий.
|xref:ITaskGroupService.AddDelegatePreset_2_MT.adoc[AddDelegatePreset(TaskGroupPresets, StaffRole)] |Добавляет роль в число исполнителей в индивидуальные настройки исполнителя группы заданий.
|xref:ITaskGroupService.AddDelegatePreset_3_MT.adoc[AddDelegatePreset(TaskGroupPresets, StaffUnit)] |Добавляет подразделение в число исполнителей в индивидуальные настройки исполнителя группы заданий.
|xref:ITaskGroupService.AddDelegatePresetSearchWord_MT.adoc[AddDelegatePresetSearchWord(TaskGroupPresets, Guid)] |Добавляет исполнителя с индивидуальными настройками. Исполнитель задается в виде поискового слова.
|xref:ITaskGroupService.AddSelectedPerformer_1_MT.adoc[AddSelectedPerformer(TaskGroup, Guid)] |Добавляет поисковое слово в число выбранных исполнителей группы заданий.
|xref:ITaskGroupService.AddSelectedPerformer_MT.adoc[AddSelectedPerformer(TaskGroup, StaffEmployee)] |Добавляет сотрудника в список выбранных исполнителей группы заданий.
|xref:ITaskGroupService.AddSelectedPerformer_2_MT.adoc[AddSelectedPerformer(TaskGroup, StaffGroup)] |Добавляет группу в число выбранных исполнителей группы заданий.
|xref:ITaskGroupService.AddSelectedPerformer_3_MT.adoc[AddSelectedPerformer(TaskGroup, StaffRole)] |Добавляет роль в число выбранных исполнителей группы заданий.
|xref:ITaskGroupService.AddSelectedPerformer_4_MT.adoc[AddSelectedPerformer(TaskGroup, StaffUnit)] |Добавляет подразделение в число выбранных исполнителей группы заданий.
|xref:ITaskGroupService.CreateChildTaskGroup_MT.adoc[CreateChildTaskGroup(Task, KindsCardKind, BaseCard, TaskList)] |Создает новую подчиненную группу заданий.
|xref:ITaskGroupService.CreateTaskGroup_MT.adoc[CreateTaskGroup(KindsCardKind)] |Создает группу заданий указанного вида.
|xref:ITaskGroupService.GetKindSettings_MT.adoc[GetKindSettings(KindsCardKind)] |Возвращает настройки вида группы заданий.
|GetTaskGroupCompletionMailNotificationInfo(TaskGroup, String) |Получает почтовое сообщение информирующее о завершении группы заданий.
|xref:ITaskGroupService.RecallTaskGroup_MT.adoc[RecallTaskGroup(TaskGroup)] |Отзывает группу заданий.
|xref:ITaskGroupService.ReorderSelectedPerformers_MT.adoc[ReorderSelectedPerformers(ObjectCollection<TaskGroupSelectedPerformer>)] |Повторно выстраивает порядок исполнения группы задания исполнителями.
|xref:ITaskGroupService.SendToPerformance_MT.adoc[SendToPerformance(TaskGroup, KindsCardKind)] |Отправляет группу заданий на исполнение.
|xref:ITaskGroupService.SendToPerformance_1_MT.adoc[SendToPerformance(TaskGroup, KindsCardKind, KindsCardKind)] |Отправляет группу заданий на исполнение.
|xref:ITaskGroupService.ValidateBeforeSendToPerformance_MT.adoc[ValidateBeforeSendToPerformance(TaskGroup, String)] |Определяет готовность группы заданий к отправке на исполнение.
|xref:ITaskGroupService.ValidateInactivePerformers_MT.adoc[ValidateInactivePerformers(TaskGroup, String)] |Проверяет группу заданий на отсутствие активных исполнителей.
|===

== Примеры

Ниже приведен пример использования сервиса при отправке на исполненные группы заданий.

[source,pre,codeblock,language-csharp]
----
//Инициализация контекста объектов

// Получение сервисов
ITaskGroupService taskGroupService = objectContext.GetService<ITaskGroupService>();
IStaffService staffService = objectContext.GetService<IStaffService>();
IStateService stateService = objectContext.GetService<IStateService>();

// Получение вида группы заданий 
QueryObject query = new QueryObject(RefKinds.CardKinds.Name, "Группа заданий УД");
KindsCardKind cardKind = objectContext.FindObject<KindsCardKind>(query);
   
   
// Создание группы заданий с параллельным исполнением 
TaskGroup taskGroup = taskGroupService.CreateTaskGroup(cardKind);
taskGroup.MainInfo.ExecutionType = TaskGroupExecutionType.Parallel;
taskGroup.MainInfo.Author = staffService.GetCurrentEmployee();
taskGroup.Description = "Подготовить финансовый отчет";
taskGroup.MainInfo.Name = "Подготовить финансовый отчет";
objectContext.AcceptChanges();

// Добавление подразделения в число исполнителей
query = new QueryObject(RefStaff.Units.Name, "Бухгалтерия");
StaffUnit unit = objectContext.FindObject<StaffUnit>(query);
taskGroupService.AddSelectedPerformer(taskGroup, unit);
objectContext.AcceptChanges();

// Получение вида задания, создаваемого по умолчанию, из настроек вида группы заданий
Guid defaultTaskCardKindId = taskGroupService.GetKindSettings(taskGroup.SystemInfo.CardKind).DefaultTaskCardKind;

// Отправка группы заданий на исполнение
taskGroupService.SendToPerformance(taskGroup, objectContext.GetObject<KindsCardKind>(defaultTaskCardKindId));
stateService.ChangeState(taskGroup, stateService.FindStateByBuiltIn(TaskGroup.PerformanceState, taskGroup));
objectContext.AcceptChanges();
----

* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddDelegatePreset_MT.adoc[ITaskGroupService.AddDelegatePreset - метод (TaskGroupPresets, StaffEmployee)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddDelegatePreset_1_MT.adoc[ITaskGroupService.AddDelegatePreset - метод (TaskGroupPresets, StaffGroup)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddDelegatePreset_2_MT.adoc[ITaskGroupService.AddDelegatePreset - метод (TaskGroupPresets, StaffRole)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddDelegatePreset_3_MT.adoc[ITaskGroupService.AddDelegatePreset - метод (TaskGroupPresets, StaffUnit)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddDelegatePresetSearchWord_MT.adoc[ITaskGroupService.AddDelegatePresetSearchWord - метод (TaskGroupPresets, Guid)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddSelectedPerformer_MT.adoc[ITaskGroupService.AddSelectedPerformer - метод (TaskGroup, StaffEmployee)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddSelectedPerformer_1_MT.adoc[ITaskGroupService.AddSelectedPerformer - метод (TaskGroup, Guid)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddSelectedPerformer_2_MT.adoc[ITaskGroupService.AddSelectedPerformer - метод (TaskGroup, StaffGroup)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddSelectedPerformer_3_MT.adoc[ITaskGroupService.AddSelectedPerformer - метод (TaskGroup, StaffRole)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.AddSelectedPerformer_4_MT.adoc[ITaskGroupService.AddSelectedPerformer - метод (TaskGroup, StaffUnit)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.CreateChildTaskGroup_MT.adoc[ITaskGroupService.CreateChildTaskGroup - метод (Task, KindsCardKind, BaseCard, TaskList)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.CreateTaskGroup_MT.adoc[ITaskGroupService.CreateTaskGroup - метод (KindsCardKind)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.GetKindSettings_MT.adoc[ITaskGroupService.GetKindSettings - метод (KindsCardKind)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.RecallTaskGroup_MT.adoc[ITaskGroupService.RecallTaskGroup - метод (TaskGroup)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.ReorderSelectedPerformers_MT.adoc[ITaskGroupService.ReorderSelectedPerformers - метод (ObjectCollection<TaskGroupSelectedPerformer>)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.SendToPerformance_MT.adoc[ITaskGroupService.SendToPerformance - метод (TaskGroup, KindsCardKind)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.SendToPerformance_1_MT.adoc[ITaskGroupService.SendToPerformance - метод (TaskGroup, KindsCardKind, KindsCardKind)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.ValidateBeforeSendToPerformance_MT.adoc[ITaskGroupService.ValidateBeforeSendToPerformance - метод (TaskGroup, String)]* +
* *xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/ITaskGroupService.ValidateInactivePerformers_MT.adoc[ITaskGroupService.ValidateInactivePerformers - метод (TaskGroup, String)]* +

*На уровень выше:* xref:../../../../../api/DocsVision/BackOffice/ObjectModel/Services/Services_NS.adoc[DocsVision.BackOffice.ObjectModel.Services - пространство имен]
