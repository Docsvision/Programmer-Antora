= UserSession -- класс

Содержит данные сессии пользователя, а также предоставляет доступ к менеджерам управления объектами системы. Этот класс является *абстрактным*.

* *Пространство имён:* `xref:api/DocsVision/Platform/ObjectManager/ObjectManager_NS.adoc[DocsVision.Platform.ObjectManager]`
* *Сборка:* `DocsVision.Platform.ObjectManager.dll`

== Синтаксис

[source,csharp]
----
public abstract class UserSession : IDisposable
----

== Свойства

[cols=",",options="header"]
|===
|Имя |Описание
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.AccessManager_PR.adoc[AccessManager]` |Предоставляет _менеджера_ по работе c объектами безопасности.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.CardManager_PR.adoc[CardManager]` |Предоставляет _менеджера_ для работы с карточками.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.Connection_PR.adoc[Connection]` |Возвращает текущее соединение с сервером {dv}.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.ExtensionManager_PR.adoc[ExtensionManager]` |Предоставляет _менеджера_ для работы с расширениями.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.FileManager_PR.adoc[FileManager]` |Предоставляет _менеджера_ для работы с файлами.
|`IconManager` |Предоставляет _менеджера_ иконок.
|`Id` |Возвращает идентификатор текущей сессии.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.LicenseManager_PR.adoc[LicenseManager]` |Предоставляет _менеджера_ лицензий.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.LockManager_PR.adoc[LockManager]` |Предоставляет _менеджера_ блокировок.
|`LogManager` |Предоставляет _менеджера_ для работы с журналом работы приложения.
|`ProfileManager` |Предоставляет _менеджера_ пользовательских профилей.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.Properties_PR.adoc[Properties]` |Возвращает коллекцию параметров пользовательской сессии.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.ReportManager_PR.adoc[ReportManager]` |Предоставляет _менеджер_ для работы с хранимыми процедурами (отчетами).
|===

== Методы

[cols=",",options="header"]
|===
|Имя |Описание
|`Awake` |Пробуждает приостановленную сессию.
|`Close` |Закрывает текущую сессию.
|`xref:api/DocsVision/Platform/ObjectManager/UserSession.CreateSearchQuery_MT.adoc[CreateSearchQuery]` |Создает поисковый запрос.
|`CreateSearchQuery(string)` |Позволяет сформировать заранее описанный поисковый запрос.
|`CreateSectionQuery` |Формирует поисковый запроса по секциям.
|`CreateSectionQuery(string)` |Позволяет сформировать заранее описанный поисковый запрос по секциям.
|`CreateView` |Создает представление.
|`CreateView(string)` |Создает представление из переданной строки XML-формата.
|`Suspend` |Приостанавливает сессию.
|===

== Заметки

В рамках сессии все данные кэшируются, к которым производилось обращение, для ускорения последующего доступа к ним. Размер кэша и продолжительность пребывания в нём данных регулируются `ObjectManager` автоматически, на основании внутренних алгоритмов. Разработчик может только явно потребовать удаления из кэша конкретных объектов (при помощи соответствующих методов этих объектов).

== Примеры

В примере создается экземпляр менеджера сессий (`manager`), и в открытом соединении создается сессия пользователя (`session`).

[source,csharp]
----
SessionManager manager = SessionManager.CreateInstance();
manager.Connect("http://localhost/DocsVision5/StorageServer/StorageServerService.asmx", string.Empty);
UserSession session = manager.CreateSession();
MessageBox.Show("IP-адрес клиента: " + session.Properties["ComputerAddress"].Value.ToString());
----
