= Library -- класс

Представляет объектную модель библиотеки карточек Workflow.

* *Пространство имен:* xref:api/DocsVision/Workflow/Objects/Objects_NS.adoc[DocsVision.Workflow.Objects]
* *Сборка:* `DocsVision.Workflow.Objects.dll`

== Синтаксис

[source,csharp]
----
public class Library
----

== Конструкторы

[cols=",",options="header"]
|===
|Имя |Описание
|Library(UserSession) |Инициализирует новый экземпляр класса Library с помощью указанного значения.
|Library(UserSession, Int32, Int32, Boolean) |Инициализирует новый экземпляр класса Library с помощью указанного значения.
|===

== Свойства

[cols=",",options="header"]
|===
|Имя |Описание
|Dictionary |Возвращает справочник СУБП.
|ExecutionMode |Возвращает ссылку на справочники Workflow.
|FolderCard |Возвращает ссылку карточку папок {dv}.
|GatePool |Возвращает пул шлюзов Workflow.
|Session |Возвращает текущую сессию.
|SessionPool |Возвращает пул сессий.
|===

== Методы

[cols=",",options="header"]
|===
|Имя |Описание
|CreateProcess(Boolean) |Создает экземпляр бизнес-процесса.
|CreateProcess(Process) |Создает экземпляр бизнес-процесса на основе имеющегося шаблона.
|CreateProcess(Boolean, Boolean) |Создает экземпляр бизнес-процесса и инициализирует все шлюзы.
|CreateProcess(Boolean, Boolean) |Создает экземпляр бизнес-процесса и добавляет в процесс все шлюзы.
|CreateProcess(Boolean, Boolean, Guid) |Создает экземпляр бизнес-процесса и добавляет в процесс все шлюзы. В бизнес-процесс будет добавлена функция (в формате "Старт-Функция-Стоп") с указанным идентификатором.
|DeleteProcess(Guid) |Удаляет бизнес-процесс с заданным идентификатором.
|GetProcess(Guid) |Получает бизнес-процесс с указанным идентификатором.
|GetProcess(String, Guid) |Получает бизнес-процесс с указанным идентификатором. При запросе будет использована сессия, выбранная из пула сессий по переданной строке соединения.
|GetProcesses(Boolean, Boolean) |Возвращает коллекцию бизнес-процессов, используя переданные параметры в качестве фильтра.
|HandleProcessFinishing(Guid, Int32) |Обрабатывает завершенной бизнес-процесс, который в зависимости от настроек может быть перемещен в архив, либо удален.
|Shutdown |Выполняет очистку пулов сессии и шлюзов, освободив занимаемые ресурсы.
|===

== Примеры

Ниже приведен пример использования объекта типа Library для запуска бизнес-процесса, полученного из имеющегося шаблона

[source,csharp]
----
//Инициализация контекста объектов
                
// Инициализация объекта для работы с библиотекой карточкой СУБП
Library library = new Library(userSession);

// Получение существующего шаблона бизнес-процесса
Process template = library.GetProcess(new Guid("00000000-0000-0000-0000-000000000000"));

// Создание нового экземпляра бизнес-процесса
Process process = library.CreateProcess(template);

// Присвоение значения переменной бизнес-процесса
process.Variables[new Guid("00000000-0000-0000-0000-000000000001")].Value = "Новое значение";

// Запуск экземпляра бизнес-процесса
process.Start(userSession.Properties["AccountName"].Value.ToString(), library.Dictionary,  ExecutionModeEnum.Automatic, true);
----

Идентификатор (00000000-0000-0000-0000-000000000001) переменной бизнес-процесса, может быть получен из шаблона БП при помощи утилиты {dv} Explorer (поле "ID" секции "Переменные" карточки БП, используемой в качестве шаблона).
